# ADR-000 â€” Problem Definition and Guiding Principles

## Status
Accepted

## Date
2026-02-22

## System
TripLedger

---

## Context

**TripLedger** is a backend solution designed to help users organize individual or group trips, focusing on financial control and structured organization.

Users who organize trips often face difficulties such as:

- Lack of control over total budget
- Difficulty splitting expenses among participants
- Lack of centralized checklist and planning
- Difficulty tracking trip status (planned, active, finished)
- Loss of important information during planning

Existing tools in the market usually:

- Are overly complex
- Do not integrate budget + checklist + expenses simply
- Are not designed for practical and objective collaboration

---

## Problem

How to enable users to organize individual or group trips with efficient control of budget, expenses, and checklist, ensuring clear business rules and future architectural evolution?

---

## Decision

**TripLedger** will be a backend API responsible for:

1. Managing individual or shared trips.
2. Controlling a previously defined budget.
3. Registering expenses associated with the trip.
4. Allowing checklist management.
5. Applying clear business rules related to:
   - Budget
   - Dates
   - Access control
   - Trip states

The API will be:

- Stateless
- Resource-oriented (RESTful)
- Versioned
- Designed for horizontal scalability

---

## Fundamental Business Rules

### 1. Trip

- A trip has an owner.
- A trip can have invited members.
- A trip has status:
  - `PLANNED`
  - `ACTIVE`
  - `FINISHED`
  - `CANCELED`

### 2. Dates

- `endDate` must be greater than `startDate`.
- A trip cannot be marked as `ACTIVE` before the start date.
- A trip cannot be modified if it is `FINISHED` or `CANCELED`.

### 3. Budget

- Every trip can have an optional budget.
- If a budget is defined:
  - The sum of expenses must be calculated dynamically.
  - The system should signal when exceeding 80% of the budget.
  - The system should signal when exceeding 100% of the budget.
- The system does not block budget overruns (conscious decision).

### 4. Expenses

- Every expense belongs to a single trip.
- Only the owner or members can register expenses.
- It is not allowed to register expenses in `CANCELED` or `FINISHED` trips.

### 5. Checklist

- Items can only be created in `PLANNED` or `ACTIVE` trips.
- Items can be marked as completed.
- Items cannot be modified if the trip is `FINISHED` or `CANCELED`.

---

## Guiding Principles of the Solution

1. Business domain has priority over technology.
2. Rules must be in the domain, not in the controller.
3. The architecture must allow future scalability.
4. Observability should be considered from the start.
5. Security must be part of the architecture, not an add-on.
6. Architectural decisions must be registered via ADR.

---

## Use of AI

In the context of TripLedger, AI can be used as a support tool for:

- Refining business rules
- Suggesting data modeling
- Suggesting indexes
- Initial code generation
- Quality review

However:

- AI is not the domain authority.
- This ADR is the official source of truth.
- Every AI suggestion must be validated against this ADR.

---

## Consequences

- TripLedger will have a real focus on business rules.
- The project will not be just a CRUD.
- The architecture will be domain-driven.
- Documentation will be an integral part of the project.
- Every future evolution must respect this problem definition.

> [Portuguese version](../pt/ADR-000.md)

