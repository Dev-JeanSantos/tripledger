# ADR-003 — Data Strategy

> [Portuguese version](../pt/ADR-003.md)

## Status
Accepted

## Date
2026-02-22

## Context

TripLedger uses MongoDB for persistence. The data strategy must:

- Maintain module isolation
- Allow future migration to microservices
- Be simple to operate and maintain

---

## Decision

- Use **single MongoDB database** with **separate collections per module**:

  - trip
  - expense
  - checklist
  - user

- Each module only accesses its own collections via **Output Ports**
- No module directly accesses another module’s collections
- All IDs are generated as **UUIDs** for uniqueness across modules
- Indexing applied per collection for common queries (tripId, userId, status)

---

## Rationale

- Single database reduces operational complexity
- Separate collections maintain logical modularity
- Indexes improve performance without premature optimization
- UUIDs ensure global uniqueness and prepare for future distributed architecture

---

## Consequences

- Modules remain independent in terms of domain logic
- Future microservice extraction requires minimal DB refactoring
- Easy to back up and manage MongoDB

