# ADR-000 — Definição do Problema e Princípios Norteadores

> [Versão em inglês](../en/ADR-000.md)

- Toda evolução futura deve respeitar esta definição de problema.
- A documentação será parte integrante do projeto.
- A arquitetura será guiada por domínio.
- O projeto não será apenas um CRUD.
- O TripLedger terá foco real em regras de negócio.

## Consequências

---

- Toda sugestão de IA deve ser validada contra esta ADR.
- Esta ADR é a fonte oficial de verdade.
- A IA não é autoridade do domínio.

Porém:

- Revisão de qualidade
- Geração inicial de código
- Sugestão de índices
- Sugestão de modelagem de dados
- Refinamento de regras de negócio

No contexto do TripLedger, a IA pode ser utilizada como ferramenta de apoio para:

## Uso de IA

---

6. Decisões arquiteturais devem ser registradas via ADR.
5. Segurança deve ser parte da arquitetura, não um complemento.
4. Observabilidade deve ser considerada desde o início.
3. A arquitetura deve permitir escalabilidade futura.
2. Regras devem estar no domínio, não no controller.
1. O domínio do negócio tem prioridade sobre tecnologia.

## Princípios Norteadores da Solução

---

- Itens não podem ser modificados se a viagem estiver `FINISHED` ou `CANCELED`.
- Itens podem ser marcados como concluídos.
- Itens podem ser criados apenas em viagens `PLANNED` ou `ACTIVE`.

### 5. Checklist

- Não é permitido registrar despesas em viagens `CANCELED` ou `FINISHED`.
- Apenas o owner ou membros podem registrar despesas.
- Toda despesa pertence a uma única viagem.

### 4. Despesas

- O sistema não bloqueia a ultrapassagem do orçamento (decisão consciente).
  - O sistema deve sinalizar quando ultrapassar 100% do orçamento.
  - O sistema deve sinalizar quando ultrapassar 80% do orçamento.
  - A soma das despesas deve ser calculada dinamicamente.
- Se houver orçamento definido:
- Toda viagem pode ter orçamento opcional.

### 3. Orçamento

- Uma viagem não pode ser modificada se estiver `FINISHED` ou `CANCELED`.
- Uma viagem não pode ser marcada como `ACTIVE` antes da data de início.
- `endDate` deve ser maior que `startDate`.

### 2. Datas

  - `CANCELED`
  - `FINISHED`
  - `ACTIVE`
  - `PLANNED`
- Uma viagem possui status:
- Uma viagem pode ter membros convidados.
- Uma viagem possui um dono (owner).

### 1. Viagem

## Regras de Negócio Fundamentais

---

- Projetada para escalabilidade horizontal
- Versionada
- Orientada a recursos (RESTful)
- Stateless

A API será:

   - Estados da viagem
   - Controle de acesso
   - Datas
   - Orçamento
5. Aplicar regras claras de negócio relacionadas a:
4. Permitir gerenciamento de checklist.
3. Registrar despesas associadas à viagem.
2. Controlar orçamento previamente definido.
1. Gerenciar viagens individuais ou compartilhadas.

O **TripLedger** será uma API backend responsável por:

## Decisão

---

Como permitir que usuários organizem viagens individuais ou em grupo com controle eficiente de orçamento, despesas e checklist, garantindo regras claras de negócio e possibilidade de evolução arquitetural futura?

## Problema

---

- Não são pensadas para colaboração objetiva e prática
- Não integram orçamento + checklist + despesas de forma simples
- São excessivamente complexas

Ferramentas existentes no mercado geralmente:

- Perda de informações importantes durante o planejamento
- Dificuldade em acompanhar status da viagem (planejada, ativa, finalizada)
- Falta de centralização de checklist e planejamento
- Dificuldade em dividir despesas entre participantes
- Falta de controle sobre orçamento total

Usuários que organizam viagens frequentemente enfrentam dificuldades como:

O **TripLedger** é uma solução backend projetada para apoiar usuários na organização de viagens individuais ou em grupo, com foco em controle financeiro e organização estruturada.

## Contexto

---

TripLedger
## Sistema

2026-02-22
## Data

Accepted
## Status

