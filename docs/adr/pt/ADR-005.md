# ADR-005 — Observabilidade & DevOps

> [Versão em inglês](../en/ADR-005.md)

## Status
Accepted

## Data
2026-02-22

## Contexto

O TripLedger deve demonstrar prontidão para produção e consciência de implantação em nuvem:

- Monitoramento de saúde
- Logging
- Métricas
- Deploy via Docker
- Uso de CDN Cloudflare

---

## Decisão

### Observabilidade

1. **Health Checks**
   - Spring Boot Actuator
   - Endpoint /actuator/health para monitoramento do serviço

2. **Logging**
   - Logging estruturado (JSON)
   - Níveis de log consistentes (INFO, DEBUG, WARN, ERROR)
   - Tracing de Request ID

3. **Métricas**
   - Expor métricas Prometheus via /actuator/prometheus
   - Rastrear eventos-chave do domínio (Viagens criadas, Despesas adicionadas, etc.)

---

### DevOps & Deploy

1. **Docker**
   - Builds multi-stage
   - Imagem inclui JDK + app Kotlin compilada
   - docker-compose para Mongo local

2. **Deploy em Nuvem**
   - Usar Cloudflare Tunnel ou Workers para expor API
   - Servir documentação estática via CDN

3. **CI/CD (opcional)**
   - Pipeline GitHub Actions
   - Lint, testes, build de imagem Docker

---

## Justificativa

- Observabilidade garante confiabilidade e manutenibilidade
- Docker + Cloudflare demonstra habilidades cloud para portfólio
- CI/CD garante deploy automatizado e repetível

---

## Consequências

- Projeto pronto para produção
- Demonstração clara de competência DevOps e cloud
- Métricas e logging permitem monitoramento e escalabilidade futura

