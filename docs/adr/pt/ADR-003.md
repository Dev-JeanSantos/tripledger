# ADR-003 — Estratégia de Dados

> [Versão em inglês](../en/ADR-003.md)

## Status
Accepted

## Data
2026-02-22

## Contexto

O TripLedger utiliza MongoDB para persistência. A estratégia de dados deve:

- Manter isolamento entre módulos
- Permitir migração futura para microserviços
- Ser simples de operar e manter

---

## Decisão

- Usar **um único banco de dados MongoDB** com **coleções separadas por módulo**:

  - trip
  - expense
  - checklist
  - user

- Cada módulo acessa apenas suas próprias coleções via **Portas de Saída**
- Nenhum módulo acessa diretamente coleções de outro módulo
- Todos os IDs são gerados como **UUIDs** para garantir unicidade entre módulos
- Indexação aplicada por coleção para consultas comuns (tripId, userId, status)

---

## Justificativa

- Banco único reduz complexidade operacional
- Coleções separadas mantêm modularidade lógica
- Índices melhoram performance sem otimização prematura
- UUIDs garantem unicidade global e preparam para arquitetura distribuída futura

---

## Consequências

- Módulos permanecem independentes em termos de lógica de domínio
- Extração futura de microserviços exige refatoração mínima do banco
- Fácil de fazer backup e gerenciar o MongoDB

